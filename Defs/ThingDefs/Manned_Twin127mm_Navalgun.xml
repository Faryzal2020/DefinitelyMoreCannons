<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="BuildingBase" Name="Twin127mmNavalgun">
    <defName>Twin127mmNavalgun</defName>
    <label>12.7cm Type 5</label>
    <description>A manned Double mounted 127mm Naval gun based on Japanese 12.7mm (5") Type 5 Naval gun. It has an automatic ammunition feeder system that takes the ammunitions from an ammunition storage below it (in Rimworld its underground), the storage can hold 80 shells. Consumes 3800W of power for its electric-powered aiming controls and loading systems, 800m max range. Explodes with radius of 4 blocks when destroyed.  Because of the size and its ability to do high angle aiming, this turret cant be placed under a roof.</description>
    <thingClass>Building_TurretGun</thingClass>
    <graphicData>
      <texPath>Things/Building/MannedTwin127mmNaval</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(11, 11)</drawSize>
      <damageData>
        <rect>(0.2,0.2,0.6,0.6)</rect>
      </damageData>
      <shadowData>
        <volume>(3.5,2.2,3.5)</volume>
        <offset>(0,0,0)</offset>
      </shadowData>
    </graphicData>
    <designationCategory>DMC</designationCategory>
    <minifiedDef>MinifiedThing</minifiedDef>
    <uiIconPath>Things/Icons/T127mmNaval_MenuIcon</uiIconPath>
    <altitudeLayer>Building</altitudeLayer>
    <hasInteractionCell>True</hasInteractionCell>
    <interactionCellOffset>(0,0,-3)</interactionCellOffset>
    <stealable>false</stealable>
    <rotatable>true</rotatable>
    <size>(6,6)</size>
    <stuffCategories>
      <li>Metallic</li>
    </stuffCategories>
    <statBases>
      <MaxHitPoints>17000</MaxHitPoints>
      <Flammability>0.7</Flammability>
      <WorkToBuild>26000</WorkToBuild>
      <Mass>30000</Mass>
      <Beauty>-20</Beauty>
    </statBases>
    <tickerType>Normal</tickerType>
    <comps>
      <li Class="CompProperties_Explosive">
        <explosiveRadius>4.0</explosiveRadius>
        <explosiveDamageType>Bomb</explosiveDamageType>
      </li>
      <li Class="CompProperties_Forbiddable"/>
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <basePowerConsumption>3800</basePowerConsumption>
      </li>
      <li Class="CompProperties_Flickable"/>
      <li Class="CompProperties_Mannable">
        <manWorkType>Violent</manWorkType>
      </li>
      <li Class="CompProperties_Refuelable">
        <fuelLabel>Ammo Rack</fuelLabel>
        <fuelGizmoLabel>Ammo</fuelGizmoLabel>
        <fuelFilter>
          <thingDefs>
            <li>127CannonShell_HighExplosive</li>
          </thingDefs>
        </fuelFilter>
        <fuelCapacity>80</fuelCapacity>
        <initialFuelPercent>0</initialFuelPercent>
        <autoRefuelPercent>0.5</autoRefuelPercent>
        <showFuelGizmo>true</showFuelGizmo>
        <minimumFueledThreshold>0</minimumFueledThreshold>
        <atomicFueling>false</atomicFueling>
        <fuelMultiplier>1</fuelMultiplier>
        <factorByDifficulty>false</factorByDifficulty>
        <consumeFuelOnlyWhenUsed>true</consumeFuelOnlyWhenUsed>
        <outOfFuelMessage>Cannot shoot: Out of ammo</outOfFuelMessage>
        <fuelIconPath>UI/Overlays/Ammo</fuelIconPath>
      </li>
    </comps>
    <passability>PassThroughOnly</passability>
    <pathCost>50</pathCost>
    <fillPercent>0.5</fillPercent>
    <thingCategories>
      <li>BuildingsSecurity</li>
    </thingCategories>
    <hasTooltip>true</hasTooltip>
    <costList>
      <Steel>6000</Steel>
      <Plasteel>700</Plasteel>
      <ComponentSpacer>18</ComponentSpacer>
    </costList>
    <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded> 
    <specialDisplayRadius>800</specialDisplayRadius>
    <constructionSkillPrerequisite>8</constructionSkillPrerequisite>
    <building>
      <turretGunDef>Gun_Twin127mmNavalgunTurret</turretGunDef>
      <turretBurstCooldownTime>14</turretBurstCooldownTime>
      <turretTopGraphicPath>Things/Building/MannedTwin127mmNaval_Top</turretTopGraphicPath>
      <turretTopDrawSize>13</turretTopDrawSize>
    </building>
    <placeWorkers>
      <li>PlaceWorker_NotUnderRoof</li>
      <li>PlaceWorker_TurretTop</li>
    </placeWorkers>
    <designationHotKey>Misc3</designationHotKey>
    <researchPrerequisites>
      <li>Twin127mmNaval</li>
    </researchPrerequisites>
    <uiIconScale>0.95</uiIconScale>
  </ThingDef>

  <ThingDef ParentName="BaseBullet">
    <defName>Bullet_Twin127mmNavalgunTurret</defName>
    <label>Twin127mm naval gun shell</label>
    <graphicData>
      <texPath>Things/Projectile/LargeShell</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
    </graphicData>
    <thingClass>Projectile_Explosive</thingClass>
    <projectile>
      <damageDef>J127mmHEBullet</damageDef>
      <!-- damage amount is the damage def default -->
      <speed>200</speed>
      <explosionRadius>2</explosionRadius>
      <flyOverhead>true</flyOverhead>
      <soundHitThickRoof>Artillery_HitThickRoof</soundHitThickRoof>
      <soundExplode>MortarBomb_Explode</soundExplode>
      <soundImpactAnticipate>MortarRound_PreImpact</soundImpactAnticipate>
      <soundAmbient>MortarRound_Ambient</soundAmbient>
    </projectile>
  </ThingDef>

  <ThingDef ParentName="BaseHumanGun">
    <defName>Gun_Twin127mmNavalgunTurret</defName>
    <label>autocannon</label>
    <description>A self-loading large-bore cannon designed to attach to a turret.</description>
    <graphicData>
      <texPath>Things/Item/Equipment/WeaponRanged/ChargeRifle</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(2,2)</drawSize>
    </graphicData>
    <soundInteract>Interact_Rifle</soundInteract>
    <menuHidden>true</menuHidden>
    <destroyOnDrop>true</destroyOnDrop>
    <tradeability>None</tradeability>
    <useHitPoints>false</useHitPoints>
    <statBases>
      <AccuracyTouch>0.8</AccuracyTouch>
      <AccuracyShort>0.85</AccuracyShort>
      <AccuracyMedium>0.9</AccuracyMedium>
      <AccuracyLong>0.85</AccuracyLong>
      <RangedWeapon_Cooldown>14</RangedWeapon_Cooldown>
      <DeteriorationRate>0</DeteriorationRate>
      <Mass>40</Mass>
      <Flammability>0</Flammability>
    </statBases>
    <weaponTags Inherit="false">
      <li>TurretGun</li>
    </weaponTags>
    <verbs>
      <li>
        <verbClass>Verb_Shoot</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <requireLineOfSight>false</requireLineOfSight>
        <defaultProjectile>Bullet_Twin127mmNavalgunTurret</defaultProjectile>
        <warmupTime>1</warmupTime>
        <forcedMissRadius>1</forcedMissRadius>
        <minRange>15</minRange>
        <range>800</range>
        <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
        <burstShotCount>2</burstShotCount>
        <soundCast>127mm_Cannon_Shoot</soundCast>
        <soundCastTail>GunTail_Heavy</soundCastTail>
        <muzzleFlashScale>50</muzzleFlashScale>
        <consumeFuelPerShot>1</consumeFuelPerShot>
        <targetParams>
          <canTargetLocations>true</canTargetLocations>
        </targetParams>
      </li>
    </verbs>
  </ThingDef>

  <!--=============== Ammunition Item ===============-->

  <ThingDef ParentName="ResourceBase">
    <defName>OnetwentysevenShell</defName>
    <label>Japanese 127mm APHE Shell</label>
    <description>A naval 127mm Armour Piercing High Explosive shell.</description>
    <graphicData>
      <texPath>Things/Projectile/127HE</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>0.90</drawSize>
    </graphicData>
    <soundInteract>Metal_Drop</soundInteract>
    <soundDrop>Standard_Drop</soundDrop>
    <stackLimit>10</stackLimit>
    <statBases>
      <MaxHitPoints>100</MaxHitPoints>
      <MarketValue>100</MarketValue>
      <Mass>22</Mass>
      <Flammability>1</Flammability>
      <DeteriorationRate>0.2</DeteriorationRate>
    </statBases>
    <intricate>true</intricate>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
  </ThingDef>
</Defs>